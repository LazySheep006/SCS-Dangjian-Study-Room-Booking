# 组织部期末自习室预约系统 📚

一个专为组织部成员设计的期末自习室座位预约工具。采用“队长+组员”的组队模式，有效管理自习室资源，避免撞车，让大家期末复习更有条理。

## ✨ 主要功能

*   **角色分工体系**：
    *   👑 **队长 (Leader)**：负责占座带队，每个时间段仅限一名队长。
    *   👥 **组员 (Member)**：加入已有车队，跟随队长复习。
*   **智能防撞与限流**：
    *   **容量控制**：每个时间段（9:00-13:00, 14:00-18:00, 19:00-22:30）限 **3人**。
    *   **队长唯一性**：系统自动检测，若某时间段已有队长，后续只能以组员身份加入。
    *   **防重复**：同一人（同名）在同一天同一时间段不可重复提交。
*   **直观的数据视图**：
    *   **抢座监控**：首页顶部卡片直观展示“后天”的剩余空位情况（满员/可约）。
    *   **聚合列表**：虽然数据库采用“一人一行”存储，但在前端自动聚合展示为“队长带队”的卡片视图。
*   **交互体验**：
    *   **自动补全**：输入姓名时自动匹配组织部成员名单。
    *   **彩蛋**：点击历史记录卡片，随机掉落“一言”鼓励语。

## 🛠️ 技术栈

*   **前端框架**：React 18 + TypeScript
*   **构建工具**：Vite
*   **样式库**：Tailwind CSS
*   **图标库**：Lucide React
*   **后端/数据库**：Supabase (PostgreSQL)
*   **部署**：Cloudflare Pages (支持 `wrangler` 部署)

## 🗄️ 数据库结构 (Supabase)

为了保证数据一致性与统计方便，采用 **“一人一行”** 的存储方式。

表名: `bookings`

| 字段名 | 类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| `id` | bigint | 唯一标识 | 主键 |
| `created_at` | timestamp | 创建时间 | |
| `date` | text | 预约日期 | 格式: `YYYY-MM-DD` |
| `slot` | text | 时间段 | 如 `9:00-13:00` |
| `leader` | text | **预约人姓名** | <span style="color:red">注意：此处存的是 Name</span> |
| `members` | text | **身份角色** | <span style="color:red">注意：此处存的是 Role ('leader' / 'member')</span> |

> **说明**：为了减少数据库迁移成本，我们在代码逻辑上复用了原有的列名，但改变了其存储含义。

## 🚀 本地开发

1.  **安装依赖**
    ```bash
    npm install
    ```

2.  **配置环境**
    在 `services/supabaseClient.ts` 中配置你的 Supabase URL 和 Anon Key。

3.  **启动项目**
    ```bash
    npm run dev
    ```

4.  **构建打包**
    ```bash
    npm run build
    ```

---
*Stay Hungry, Stay Foolish. 祝大家期末全 A！*
